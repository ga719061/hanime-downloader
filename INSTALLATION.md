# 安裝與測試指南

## 快速安裝步驟

### 1. 載入擴充插件到 Chrome

```powershell
# 當前專案位置
C:\Users\ga200\.gemini\antigravity\scratch\hanime-downloader
```

1. 開啟 Chrome 瀏覽器
2. 在網址列輸入：`chrome://extensions/`
3. 開啟右上角的「開發人員模式」切換開關
4. 點擊「載入未封裝項目」按鈕
5. 選擇專案資料夾：`C:\Users\ga200\.gemini\antigravity\scratch\hanime-downloader`
6. 擴充插件應該會出現在列表中，確認圖示正確顯示

### 2. 測試擴充插件功能

#### 測試情境 1: 檢測影片頁面

1. 前往 https://hanime1.me
2. 點擊任一影片進入播放頁面
3. 確認網址格式為：`https://hanime1.me/watch?v=xxxxx`
4. 點擊瀏覽器工具列上的 Hanime Downloader 圖示
5. **預期結果**：
   - 彈出視窗顯示載入動畫
   - 成功載入影片標題和縮圖
   - 顯示影片 ID
   - 列出可用的解析度選項

#### 測試情境 2: 解析度選擇

1. 在彈出視窗中查看解析度選項
2. **預期結果**：
   - 顯示多個解析度卡片（例如：720p, 1080p）
   - 1080p 標記為「推薦」（如果有）
   - 預設選中第一個或推薦的解析度
   - 卡片有 hover 效果（上移 + 陰影）
   - 選中的卡片有藍色邊框光暈

#### 測試情境 3: 下載功能

1. 選擇想要的解析度
2. 點擊「開始下載」按鈕
3. **預期結果**：
   - 按鈕顯示「下載中...」狀態
   - Chrome 下載對話框出現
   - 選擇儲存位置後開始下載
   - 彈出視窗顯示成功訊息
   - 3秒後自動關閉視窗

#### 測試情境 4: 錯誤處理

1. 在非影片頁面（例如首頁）點擊擴充插件圖示
2. **預期結果**：
   - 顯示錯誤訊息：「請確保您在 hanime1.me 的影片頁面上」
   - 提供關閉按鈕

### 3. UI 外觀檢查

檢查以下視覺元素：

- [ ] **配色**：深色背景 + 紫粉漸層
- [ ] **Logo**：標題文字顯示漸層效果
- [ ] **載入動畫**：旋轉 spinner 流暢
- [ ] **影片縮圖**：正確顯示，hover 時顯示播放圖示
- [ ] **解析度卡片**：玻璃擬態效果
- [ ] **按鈕**：hover 時有上浮和光暈效果
- [ ] **成功動畫**：勾選圖示縮放彈跳效果
- [ ] **整體佈局**：間距協調，視覺層次清晰

### 4. 疑難排解

#### 問題：擴充插件無法載入

**解決方案**：
- 檢查 `manifest.json` 是否存在
- 確認所有文件都在專案資料夾中
- 查看 Chrome 擴充插件頁面的錯誤訊息

#### 問題：點擊圖示沒反應

**解決方案**：
- 確認圖示文件都存在於 `icons/` 資料夾
- 重新載入擴充插件
- 檢查瀏覽器控制台錯誤訊息（F12）

#### 問題：無法提取影片資訊

**解決方案**：
- 確認您在正確的頁面（`/watch?v=xxxxx`）
- 網站結構可能已更新，需要調整選擇器
- 開啟開發者工具查看 content script 錯誤

#### 問題：下載失敗

**解決方案**：
- 檢查網路連線
- 確認有足夠的磁碟空間
- 網站可能有反爬機制，嘗試在正常瀏覽器環境下載
- 檢查 background.js 控制台錯誤訊息

## 專案文件清單

```
✓ manifest.json          - 擴充插件配置
✓ background.js          - 背景服務腳本
✓ content.js            - 內容腳本
✓ popup.html            - 彈出視窗 HTML
✓ popup.js              - 彈出視窗邏輯
✓ styles.css            - 樣式檔案
✓ README.md             - 使用說明
✓ icons/icon-16.png     - 16x16 圖示
✓ icons/icon-48.png     - 48x48 圖示
✓ icons/icon-128.png    - 128x128 圖示
```

## 已知限制

1. **網站依賴**：此擴充插件完全依賴於 hanime1.me 的網頁結構，如果網站更新可能需要調整代碼
2. **無法直接測試**：由於無法訪問目標網站，實際功能需要在真實環境中驗證
3. **解析度提取**：如果下載頁面的表格結構與預期不同，可能需要調整選擇器
4. **防護機制**：網站可能有反爬蟲機制影響下載功能

## 下一步

如果在實際使用中遇到問題，請：

1. 打開瀏覽器開發者工具（F12）
2. 查看 Console 標籤中的錯誤訊息
3. 檢查 Network 標籤中的請求狀態
4. 根據錯誤訊息調整代碼

享受使用！🎉
